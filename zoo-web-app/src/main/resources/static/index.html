<html>
    <head>
        <title>ZOO WEB APP</title>
        <link rel="stylesheet" href="style.css">
    </head>

    <body>
        <header>
            <h1>ZOO WEB APP - POCETNA STRANICA</h1>
        </header>
        <div id="section-2">
            <nav>
                <ul>
                    <li>POCETNA</li>
                    <a href="zoo.html" target="_self">
                        <li>ZOO</li>
                    </a>
                    <a href="" target="_self">
                        <li>Zivotinje</li>
                    </a>
                    <a href="" target="_self">
                        <li>Nastambe</li>
                    </a>
                    <a href="" target="_self">
                        <li>Radnici</li>
                    </a>
                    <a href="" target="_self">
                        <li>Obaveze</li>
                    </a>
                    <a href="" target="_self">
                        <li>Posjete</li>
                    </a>
                    <a href="" target="_self">
                        <li>Incidenti</li>
                    </a>
                </ul>
            </nav>
            <main>
                <form>
                    <div class="box">
                        <p>Unesi naziv zooloskog vrta:</p>
                        <p id="tren-naziv"></p>
                        <input type="text" id="naziv" placeholder="Naziv">
                    </div>
                    <div class="box">
                        <p>Unesi lokaciju:</p>
                        <p id="tren-adresa"></p>
                        <input type="text" id="adresa" placeholder="Adresa">
                    </div>
                    <div class="box">
                        <p>Unesi kontakt telefon:</p>
                        <p id="tren-telefon">Trenutni kontakt telefon:</p>
                        <input type="text" id="telefon" placeholder="Kontakt telefon">
                    </div>
                    <div class="box">
                        <p>Unesi mail:</p>
                        <p id="tren-mail">Trenutni mail:</p>
                        <input type="text" id="mail" placeholder="Mail">
                    </div>
                </form>
                <button onclick="spremiZoo()">PROMIJENI</button>
            </main>
        </div>
        <script>
            const trenNazivText = "Trenutni naziv:";
            const trenAdresaText = "Trenutna adresa:";
            const trenTelefonText = "Trenutni telefon:";
            const trenMailText = "Trenutni mail:";

            async function ucitajZoo(){
                const res = await fetch("/api/zoo");
                const data = await res.json();
                if (data){
                    document.getElementById("tren-naziv").innerHTML = `${trenNazivText} ${data.naziv}`;
                    document.getElementById("tren-adresa").innerHTML = `${trenAdresaText} ${data.adresa}`;
                    document.getElementById("tren-telefon").innerHTML = `${trenTelefonText} ${data.telefon}`;
                    document.getElementById("tren-mail").innerHTML = `${trenMailText} ${data.mail}`;
                }
                else{
                    document.getElementById("tren-naziv").innerHTML = trenNazivText;
                    document.getElementById("tren-adresa").innerHTML = trenAdresaText;
                    document.getElementById("tren-telefon").innerHTML = trenTelefonText;
                    document.getElementById("tren-mail").innerHTML = trenMailText;
                }
            }

            async function spremiZoo(){
                const naziv = document.getElementById("naziv");
                const adresa = document.getElementById("adresa");
                const telefon = document.getElementById("telefon");
                const mail = document.getElementById("mail");
                const nazivVal = naziv.value;
                const adresaVal = adresa.value;
                const telefonVal = telefon.value;
                const mailVal = mail.value;

                await fetch("/api/zoo", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify(
                        {
                            naziv: nazivVal,
                            adresa: adresaVal,
                            telefon: telefonVal,
                            mail: mailVal
                        })
                });

                await alert("Podaci su spremljeni!");
                naziv.value = "";
                adresa.value="";
                telefon.value="";
                mail.value="";
                await ucitajZoo();
            }

            ucitajZoo();
        </script>
    </body>

</html>