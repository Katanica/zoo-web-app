<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <title>ZOO - Spisak Radnika</title>
    <style>
        :root {
            --primary-dark: #1a5e4b;
            --bg-gradient: linear-gradient(135deg, #f5f7fa, #c3cfe2);
        }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--bg-gradient);
            padding: 2rem; margin: 0;
        }
        .container { max-width: 1100px; margin: auto; }
        .spisak-card {
            background: white; border-radius: 12px;
            overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .spisak-header {
            background: var(--primary-dark); color: white;
            padding: 1.5rem 2rem; display: flex;
            justify-content: space-between; align-items: center;
        }
        .add-btn {
            background: white; color: var(--primary-dark);
            padding: 0.6rem 1.2rem; text-decoration: none;
            border-radius: 6px; font-weight: 700;
        }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 15px; border-bottom: 2px solid #eee; color: #666; }
        td { padding: 15px; border-bottom: 1px solid #eee; }
        .tag { background: #eef2f7; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; margin: 2px; display: inline-block; }
    </style>
</head>
<body>

<div class="container">
    <header style="text-align:center; margin-bottom:20px;">
        <a href="index.html" style="color:#3498db; text-decoration:none;">‚Üê Poƒçetna</a>
    </header>

    <div class="spisak-card">
        <div class="spisak-header">
            <h2>üë• SPISAK ZAPOSLENIKA</h2>
            <a href="zaposlenik-forma.html" class="add-btn">+ DODAJ RADNIKA</a>
        </div>
        <div style="padding: 20px;">
            <table>
                <thead>
                <tr>
                    <th>Radnik</th>
                    <th>Mobitel</th>
                    <th>Teƒçajevi</th>
                    <th>Licence</th>
                    <th>Akcije</th>
                </tr>
                </thead>
                <tbody id="lista-radnika"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    async function ucitajRadnike() {
        const res = await fetch('/api/radnik');
        const radnici = await res.json();
        const tbody = document.getElementById('lista-radnika');
        tbody.innerHTML = '';

        radnici.forEach(r => {
            tbody.innerHTML += `
                <tr>
                    <td><strong>${r.ime} ${r.prezime}</strong><br><small>${r.email || ''}</small></td>
                    <td>${r.telefon}</td>
                    <td>${r.tecajevi ? r.tecajevi.split(',').map(t => `<span class="tag">${t}</span>`).join('') : '/'}</td>
                    <td>${r.licence || '/'}</td>
                    <td><button onclick="obrisi(${r.id})" style="color:red; cursor:pointer; background:none; border:none;">Obri≈°i</button></td>
                </tr>`;
        });
    }

    async function obrisi(id) {
        if(confirm("Sigurno?")) {
            await fetch('/api/radnik/' + id, { method: 'DELETE' });
            ucitajRadnike();
        }
    }

    document.addEventListener("DOMContentLoaded", ucitajRadnike);
</script>
</body>
</html>